{% load static %}
<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="{% static 'CSS/usuario/inicio_sesion.css' %}">
  <link rel="icon" type="image/png" href="{% static 'Img/logo_san_bernardo_2.png' %}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://code.iconify.design/iconify-icon/2.1.0/iconify-icon.min.js"></script>
  <script src="https://kit.fontawesome.com/6a284d15f6.js" crossorigin="anonymous"></script>

  <title>Inicio de Sesi贸n</title>
</head>

<body>

  <!-- NAVBAR -->
  <nav id="navbar" class="navbar">

      <!-- Logo izquierda -->
      <div class="navbar-left">
        <img src="{% static 'Img/logo_navbar.jpg' %}" class="logo-navbar-img" alt="Logo">
      </div>

      <!-- T铆tulo centrado -->
      <h2 class="titulo-pagina">Seguridad Ciudadana "San Bernardo"</h2>

      <!-- Caja invisible derecha para centrar -->
      <div class="navbar-right"></div>

  </nav>

  <!-- CONTENEDOR PRINCIPAL -->
  <div class="login-wrapper">

      <!-- Imagen a la izquierda -->
      <div class="login-image"></div>

      <!-- Formulario a la derecha EXACTO como lo ten铆as -->
      <div class="login-container">

          <div class="login-header">
              <h1> Inicio de Sesi贸n</h1>
              <p>Sistema de Seguridad Ciudadana - Personal Autorizado</p>
          </div>

          <form id="login-form" method="POST" action="{% url 'login' %}">
              {% csrf_token %}
              <div class="form-group">
                  <label> Correo Electr贸nico</label>
                  <input 
                      type="email"
                      name="correo_electronico_usuario"
                      required
                      placeholder="usuario@seguridad.cl"
                      value="{{ request.POST.correo_electronico_usuario|default:'' }}"
                      id="email-input">
              </div>

              <div class="form-group">
                  <label> Contrase帽a</label>
                  <input 
                      type="password"
                      name="password"
                      required
                      placeholder="Ingrese su contrase帽a"
                      id="password-input">
              </div>

              <button class="login-btn" type="submit" id="submit-btn">Iniciar Sesi贸n</button>

          </form>

          <div class="login-footer">
              <p><strong>Acceso restringido:</strong> Solo para personal autorizado de la municipalidad de San Bernardo.</p>
          </div>

      </div>

  </div>


  <!-- SweetAlert + Loading -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {

      const loginForm = document.getElementById('login-form');
      const submitBtn = document.getElementById('submit-btn');

      {% if alert_type %}
      Swal.fire({
          icon: '{{ alert_type }}',
          title: '{{ alert_title|escapejs }}',
          text: '{{ alert_message|escapejs }}',
          confirmButtonText: 'Aceptar',
          confirmButtonColor: '#28a745',
          background: '#1e1e1e',
          color: 'white',
          timer: 5000,
          timerProgressBar: true
      });
      {% endif %}

      loginForm.addEventListener('submit', function(e) {

          const email = document.getElementById('email-input').value;
          const password = document.getElementById('password-input').value;

          if (!email || !password) {
              e.preventDefault();
              Swal.fire({
                  icon: 'warning',
                  title: 'Campos incompletos 锔',
                  text: 'Por favor complete todos los campos',
                  confirmButtonText: 'Entendido',
                  confirmButtonColor: '#ffc107',
                  background: '#1e1e1e',
                  color: 'white'
              });
              return;
          }

          // Loading
          submitBtn.classList.add('loading');
          submitBtn.disabled = true;
      });

    });
  </script>

</body>

</html>